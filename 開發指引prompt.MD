# FCut 開發指引 Prompt

## 技術架構

### 前後端分離架構
- 使用 `pywebview` 作為橋接 Python 後端與前端 UI 的工具。
- 明確定義 Python 後端和前端之間的 API 介面，便於後續移植到其他平台。

### 前端技術選型
- 使用 Vue 3 + TypeScript 開發前端。
- 配套技術：Vite、Vue Router、Pinia、Tailwind CSS。
- 國際化：使用 Vue I18n 實現多語言支持。

### 後端技術選型
- 使用 Python 開發後端業務邏輯。
- 使用 `uv` 管理套件和環境。
- 國際化：使用 Python 的 `gettext` 或專門的 i18n 庫。

### 打包與發布
- 使用 Nuitka 將 Python 程式編譯為 Windows 執行檔。
- 封裝成 MSIX 安裝檔以便上架 Microsoft Store。

---

## 項目結構與工作流程

### 資料夾結構
```
FCut/
├── backend/               # Python 後端
│   ├── core/              # 核心業務邏輯
│   │   ├── processors/    # 各種影片處理器
│   │   ├── queue/         # 任務佇列管理
│   │   └── utils/         # 通用工具函數
│   ├── api/               # API 端點定義
│   ├── models/            # 資料模型
│   └── locales/           # 後端國際化文字
├── frontend/              # 前端應用
│   ├── src/
│   │   ├── assets/        # 靜態資源
│   │   ├── components/    # Vue 元件
│   │   │   ├── base/      # 基礎元件類別
│   │   │   ├── common/    # 通用元件
│   │   │   └── features/  # 功能專用元件
│   │   ├── layouts/       # 布局元件
│   │   ├── pages/         # 頁面元件
│   │   ├── stores/        # Pinia 狀態管理
│   │   │   └── i18n.ts    # i18n 狀態管理
│   │   ├── i18n/          # 國際化相關
│   │   │   ├── index.ts   # i18n 配置和實例
│   │   │   └── locales/   # 翻譯文檔
│   │   ├── types/         # TypeScript 類型定義
│   │   ├── router/        # Vue Router 設定
│   │   ├── styles/        # 全局樣式
│   │   └── utils/         # 前端工具函數
│   ├── public/            # 靜態檔案
│   ├── index.html
│   ├── vite.config.ts     # Vite 配置
│   └── package.json       # 前端依賴
├── shared/                # 前後端共用程式碼
│   ├── types/             # 共用類型定義
│   └── i18n/              # 共用的國際化資源
├── tests/                 # 測試相關
│   ├── backend/           # 後端測試
│   └── frontend/          # 前端測試
├── scripts/               # 構建與部署腳本
│   ├── build.py           # 構建腳本
│   ├── package_msix.py    # MSIX 打包腳本
│   └── extract_i18n.py    # 提取需翻譯文字的工具腳本
├── dist/                  # 建構輸出目錄
├── resources/             # 應用資源
├── docs/                  # 專案文檔
├── main.py                # 應用入口點
├── pyproject.toml         # Python 專案設定
└── README.md              # 專案說明
```

### 工作流程
1. **前端原型開發**
   - 使用 Vue 3 和 Tailwind CSS 快速構建 UI 原型。
   - 定義頁籤式導航和三大區塊的基本布局。

2. **後端 API 開發**
   - 定義清晰的 API 介面，使用 Flask 或 FastAPI。
   - 實現業務邏輯功能的封裝，並提供對應的 API。

3. **前後端整合**
   - 使用 `pywebview` 渲染前端，並通過 API 與後端通信。

4. **測試與優化**
   - 編寫單元測試和整合測試。
   - 優化大文件處理和多任務佇列的效能。

5. **打包與發布**
   - 使用 Nuitka 編譯後端程式。
   - 使用 MSIX 工具封裝安裝檔。

---

## UI/UX 設計細節

### 響應式設計
- 定義清晰的斷點：
  - 大螢幕：左側滑出導航欄。
  - 小螢幕：全屏覆蓋導航。

### 三大區塊布局
1. **共同操作區**
   - 列表顯示已選擇的影片，提供刪除和清空按鈕。
   - 支援多檔案選擇，並顯示小預覽圖。

2. **功能操作區**
   - 根據功能提供可設定參數，例如 speedup 倍數。
   - 使用選單和數字輸入框結合的方式設置參數。
   - 提供 `send to queue` 按鈕，將任務加入佇列。

3. **輸出內容區**
   - 設定輸出路徑，默認為下載資料夾。
   - 顯示任務佇列和執行日誌。

### 頁籤式導航
- 使用不同顏色區分頁籤。
- 支援左右滑動切換頁籤。
- 切換頁籤時，功能操作區內容隨之改變。

---

## 軟體功能

### 基本功能
1. **影片加速 (Speedup)**：調整影片播放速度，支援多倍速選項。
2. **跳剪 (Jumpcut)**：自動移除影片中靜止或無聲的片段。
3. **移除靜音 (Remove Silence)**：根據音量閾值自動剪輯靜音部分。
4. **移除無動作片段 (Remove Motionless)**：檢測畫面變化，移除無動作的片段。

### 進階功能
1. **批次處理**：支援多檔案同時處理，並提供進度條顯示。
2. **自訂參數模板**：允許用戶保存常用的參數設置，快速應用於新任務。
3. **格式轉換**：支援輸出多種影片格式（如 MP4、MKV、AVI 等）。
4. **影片合併**：將多個處理後的影片合併為一個檔案。
5. **影片截圖**：提供截圖功能，快速保存影片中的特定畫面。
6. **多語言支持**：提供多語言界面，支援即時切換。

---

## 測試策略

### 前端測試
- 使用 Vitest 編寫單元測試。
- 使用 Cypress 進行 E2E 測試。

### 後端測試
- 使用 pytest 編寫功能測試。
- 模擬 API 請求，測試業務邏輯的正確性。

---

## 國際化與本地化

### 前端國際化
- 使用 Vue I18n 實現語言切換。
- 在 Pinia store 中管理當前語言設置。

### 後端國際化
- 使用 `gettext` 管理翻譯文字。
- 將所有用戶可見訊息納入翻譯範圍。

---

## 未來規劃

1. **跨平台支持**：
   - 移植到 Linux 和 macOS 平台。
   - 探索使用 Tauri 或其他技術以支援移動端和 Web 端。

2. **效能優化**：
   - 使用 GPU 加速處理大檔案。
   - 優化多任務佇列的執行效率。

3. **AI 功能集成**：
   - 使用 AI 技術進行影片內容分析，例如自動生成字幕或標籤。
   - 提供智能剪輯建議，根據內容自動選擇最佳剪輯點。

4. **社群功能**：
   - 支援用戶分享處理模板或設定。
   - 提供雲端同步功能，保存用戶設置和處理記錄。

5. **插件系統**：
   - 開放插件接口，允許用戶擴展功能。
   - 提供官方插件市場，方便下載和安裝。

6. **安全性增強**：
   - 增加檔案加密功能，保護用戶隱私。
   - 提供處理記錄的刪除選項，確保數據安全。

---

## 後續步驟
1. 建立詳細的技術規格文件。
2. 創建低保真原型或線框圖驗證 UI 流程。
3. 定義開發里程碑和時間表。