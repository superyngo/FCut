<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vue i18n éŒ¯èª¤ä¿®å¾©æ¸¬è©¦</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 20px;
        background-color: #f5f5f5;
      }
      .test-container {
        background: white;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }
      .test-result {
        margin: 10px 0;
        padding: 10px;
        border-radius: 4px;
      }
      .success {
        background-color: #d4edda;
        color: #155724;
        border: 1px solid #c3e6cb;
      }
      .error {
        background-color: #f8d7da;
        color: #721c24;
        border: 1px solid #f5c6cb;
      }
      button {
        margin: 5px;
        padding: 10px 15px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        background-color: #007bff;
        color: white;
      }
      button:hover {
        background-color: #0056b3;
      }
    </style>
  </head>
  <body>
    <div class="test-container">
      <h1>Vue i18n èªè¨€æª¢æ¸¬ä¿®å¾©æ¸¬è©¦</h1>

      <h2>æ¸¬è©¦èªªæ˜</h2>
      <p>æ­¤é é¢ç”¨æ–¼æ¸¬è©¦ Vue i18n è‡ªå‹•èªè¨€æª¢æ¸¬ä¿®å¾©æ˜¯å¦æœ‰æ•ˆã€‚</p>
      <p>
        ä¿®å¾©å‰ï¼šç•¶ç€è¦½å™¨èªè¨€è¨­ç‚º 'zh' æ™‚ï¼ŒVue i18n æœƒå°‹æ‰¾ 'zh' locale
        ä½†æ‰¾ä¸åˆ°ï¼Œç”¢ç”Ÿè­¦å‘Šã€‚
      </p>
      <p>
        ä¿®å¾©å¾Œï¼šæˆ‘å€‘æ·»åŠ äº† 'zh' ä½œç‚º 'zh-TW' çš„åˆ¥åï¼Œä¸¦æ”¹å–„äº† fallback æ©Ÿåˆ¶ã€‚
      </p>

      <h2>ç€è¦½å™¨èªè¨€æª¢æ¸¬</h2>
      <div id="browser-lang" class="test-result">æª¢æ¸¬ä¸­...</div>

      <h2>èªè¨€åˆ‡æ›æ¸¬è©¦</h2>
      <p>é»æ“Šä¸‹æ–¹æŒ‰éˆ•æ¸¬è©¦èªè¨€åˆ‡æ›åŠŸèƒ½ï¼š</p>
      <button onclick="testLocale('zh-TW')">æ¸¬è©¦ zh-TW</button>
      <button onclick="testLocale('zh-CN')">æ¸¬è©¦ zh-CN</button>
      <button onclick="testLocale('en')">æ¸¬è©¦ en</button>
      <button onclick="testLocale('zh')">æ¸¬è©¦ zh (ä¿®å¾©å‰æœƒå‡ºéŒ¯)</button>

      <div id="test-results"></div>

      <h2>å¯¦éš›æ‡‰ç”¨æ¸¬è©¦</h2>
      <p><a href="http://localhost:5175" target="_blank">æ‰“é–‹ä¸»æ‡‰ç”¨ç¨‹å¼</a></p>
      <p>æ‰“é–‹ç€è¦½å™¨é–‹ç™¼è€…å·¥å…·æ§åˆ¶å°ï¼Œæª¢æŸ¥æ˜¯å¦é‚„æœ‰ Vue i18n ç›¸é—œè­¦å‘Šã€‚</p>

      <h2>æª¢æŸ¥æ¸…å–®</h2>
      <ul>
        <li>âœ… ç¢ºèª i18n.ts ä¸­å·²æ·»åŠ  'zh' ä½œç‚º 'zh-TW' çš„åˆ¥å</li>
        <li>âœ… ç¢ºèª fallbackLocale å·²è¨­ç‚ºé™£åˆ—å½¢å¼ ["zh-TW", "en"]</li>
        <li>âœ… ç¢ºèª stores.ts ä¸­ setLocale å‡½æ•¸å·²æ·»åŠ  'zh' æ˜ å°„é‚è¼¯</li>
        <li>âœ… ç¢ºèªå·²ä¿®å¾© logger.warn ç‚º logger.warn</li>
        <li>ğŸ”„ éœ€è¦åœ¨ç€è¦½å™¨æ§åˆ¶å°ç¢ºèªç„¡ Vue i18n è­¦å‘Š</li>
        <li>ğŸ”„ éœ€è¦æ¸¬è©¦èªè¨€åˆ‡æ›åŠŸèƒ½æ­£å¸¸</li>
      </ul>
    </div>

    <script>
      // æª¢æ¸¬ç€è¦½å™¨èªè¨€
      function detectBrowserLanguage() {
        const lang =
          navigator.language || navigator.languages?.[0] || "unknown";
        const languages = navigator.languages || [];

        const resultDiv = document.getElementById("browser-lang");
        resultDiv.innerHTML = `
                <strong>ä¸»è¦èªè¨€:</strong> ${lang}<br>
                <strong>æ‰€æœ‰æ”¯æ´èªè¨€:</strong> ${languages.join(", ")}<br>
                <strong>èªè¨€å‰ç¶´:</strong> ${lang.split("-")[0]}
            `;

        // æª¢æŸ¥æ˜¯å¦ç‚ºä¸­æ–‡
        if (lang.startsWith("zh")) {
          resultDiv.className = "test-result success";
          resultDiv.innerHTML +=
            "<br><strong>âœ… æª¢æ¸¬åˆ°ä¸­æ–‡èªè¨€ï¼Œé€™æ­£æ˜¯æˆ‘å€‘è¦ä¿®å¾©çš„å ´æ™¯</strong>";
        } else {
          resultDiv.className = "test-result";
          resultDiv.innerHTML +=
            "<br><strong>â„¹ï¸ éä¸­æ–‡èªè¨€ï¼Œä½†ä¿®å¾©ä»ç„¶æœ‰æ•ˆ</strong>";
        }
      }

      // æ¸¬è©¦èªè¨€è¨­å®š
      function testLocale(locale) {
        const resultsDiv = document.getElementById("test-results");

        try {
          // æ¨¡æ“¬èªè¨€æª¢æ¸¬é‚è¼¯
          let processedLocale = locale;

          // æ‡‰ç”¨æˆ‘å€‘çš„ä¿®å¾©é‚è¼¯
          if (locale === "zh") {
            processedLocale = "zh-TW";
            console.log(`Browser detected 'zh' locale, mapping to 'zh-TW'`);
          }

          const supportedLocales = ["zh-TW", "zh-CN", "en"];
          if (!supportedLocales.includes(processedLocale)) {
            console.warn(
              `Unsupported locale '${processedLocale}', falling back to 'zh-TW'`
            );
            processedLocale = "zh-TW";
          }

          console.log(`Setting locale to: ${processedLocale}`);

          const resultHtml = `
                    <div class="test-result success">
                        <strong>âœ… æ¸¬è©¦ ${locale} æˆåŠŸ</strong><br>
                        åŸå§‹èªè¨€: ${locale}<br>
                        è™•ç†å¾Œèªè¨€: ${processedLocale}<br>
                        æ™‚é–“: ${new Date().toLocaleTimeString()}
                    </div>
                `;

          resultsDiv.innerHTML = resultHtml + resultsDiv.innerHTML;
        } catch (error) {
          const errorHtml = `
                    <div class="test-result error">
                        <strong>âŒ æ¸¬è©¦ ${locale} å¤±æ•—</strong><br>
                        éŒ¯èª¤: ${error.message}<br>
                        æ™‚é–“: ${new Date().toLocaleTimeString()}
                    </div>
                `;
          resultsDiv.innerHTML = errorHtml + resultsDiv.innerHTML;
        }
      }

      // é é¢è¼‰å…¥æ™‚æª¢æ¸¬èªè¨€
      detectBrowserLanguage();

      // æ·»åŠ ä¸€äº›æç¤ºä¿¡æ¯
      console.log("=== Vue i18n ä¿®å¾©æ¸¬è©¦é é¢å·²è¼‰å…¥ ===");
      console.log(
        "è«‹æ‰“é–‹ä¸»æ‡‰ç”¨ç¨‹å¼ http://localhost:5175 ä¸¦æª¢æŸ¥æ§åˆ¶å°æ˜¯å¦é‚„æœ‰ Vue i18n è­¦å‘Š"
      );
      console.log("ä¿®å¾©å…§å®¹:");
      console.log('1. æ·»åŠ  "zh" ä½œç‚º "zh-TW" çš„åˆ¥å');
      console.log("2. è¨­å®š fallbackLocale ç‚ºé™£åˆ—å½¢å¼");
      console.log("3. æ·»åŠ èªè¨€æ˜ å°„å’Œé©—è­‰é‚è¼¯");
      console.log("4. ç¦ç”¨ä¸å¿…è¦çš„è­¦å‘Šè¨Šæ¯");
    </script>
  </body>
</html>
